<?php require_once "partials/header.php" ?>

<body class="mx-[8%]">
    <?php require_once "partials/menu.php" ?>
    <hr class="mb-10">
adjak
    <article class="grid grid-cols-[0.5fr_2.5fr] gap-16 ">
        <div class="">
            <div class="relative inline-block text-left">
                <button type="button" id="menu-button"
                    class="inline-flex  w-full rounded-md  bg-white px-2 py-2 text-[16px] font-medium text-gray-700  gap-[230px]">
                    Size
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 "
                        viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                        <path
                            d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z" />
                    </svg>
                </button>
                <div class="dropdown-menu focus:outline-none hidden" role="menu" aria-orientation="vertical"
                    aria-labelledby="menu-button" id="dropdown-menu">
                    <div class="py-1 flex w-full gap-4 grid grid-cols-[1fr_1fr_1fr_1fr] justify-center" role="none">
                        <a href="#"
                            class="text-gray-700 block px-4 py-2 text-sm border border-[1px]-[#7d8699] rounded-tl-[10px] rounded-br-[10px] text-center"
                            role="menuitem">S</a>
                        <a href="#"
                            class="text-gray-700 block px-4 py-2 text-sm border border-[1px]-[#7d8699] rounded-tl-[10px] rounded-br-[10px] text-center"
                            role="menuitem">M</a>
                        <a href="#"
                            class="text-gray-700 block px-4 py-2 text-sm border border-[1px]-[#7d8699] rounded-tl-[10px] rounded-br-[10px] text-center"
                            role="menuitem">L</a>
                        <a href="#"
                            class="text-gray-700 block px-4 py-2 text-sm border border-[1px]-[#7d8699] rounded-tl-[10px] rounded-br-[10px] text-center"
                            role="menuitem">XL</a>
                        <a href="#"
                            class="text-gray-700 block px-4 py-2 text-sm border border-[1px]-[#7d8699] rounded-tl-[10px] rounded-br-[10px] text-center"
                            role="menuitem">XXL</a>
                    </div>
                </div>
            </div>
            <hr class="mt-4 w-[300px]">


            <div class="relative inline-block text-left">
                <button type="button" id="menu-button1"
                    class="inline-flex  w- rounded-md  bg-white px-2 py-2 text-[16px]  font-medium text-gray-700  gap-[204px]">
                    <div>Màu sắc</div>
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5"
                        viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                        <path
                            d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z" />
                    </svg>
                </button>
                <div class="dropdown-menu focus:outline-none hidden" role="menu" aria-orientation="vertical"
                    aria-labelledby="menu-button" id="dropdown-menu1">
                    <div class="py-1 flex w-full gap-4 grid grid-cols-[1fr_1fr_1fr_1fr_1fr_1fr_1fr] justify-center" role="none">
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                        <a href="#"
                            class="text-gray-700 block w-[18px] h-[18px] ro text-sm border border-[1px]-[#7d8699]  rounded-full text-center"
                            role="menuitem"></a>
                    </div>
                </div>

            </div>
            <hr class="mt-4 w-[300px]">
            <div class="relative inline-block text-left">
                <!-- Nút bấm "Chọn giá" -->
                <button onclick="toggleSlider()"
                    class="inline-flex  w-full rounded-md  bg-white px-2 py-2 text-[16px] font-medium text-gray-700  gap-[199px]">
                    <div>Chọn giá</div>
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5"
                        viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                        <path
                            d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z" />
                    </svg>
                </button>

                <!-- Container cho thanh trượt khi nhấn nút -->
                <div x-data="range()" class="slider-container mt-8 hidden" id="slider-container"
                    x-init="mintrigger(); maxtrigger()" class="relative max-w-xl w-full">
                    <div>
                        <input type="range" step="100" x-bind:min="min" x-bind:max="max" x-on:input="mintrigger"
                            x-model="minprice"
                            class="absolute pointer-events-none appearance-none z-20 h-2 w-full opacity-0 cursor-pointer appearance-none focus:outline-none">

                        <input type="range" step="100" x-bind:min="min" x-bind:max="max" id="slider"
                            x-on:input="maxtrigger" x-model="maxprice"
                            class="absolute pointer-events-none appearance-none z-20 h-2 w-full opacity-0 cursor-pointer">

                        <div class="relative z-10 h-2">

                            <div class="absolute z-10 left-0 right-0 bottom-0 top-0 rounded-md bg-gray-200"></div>

                            <div class="absolute z-20 top-0 bottom-0 rounded-md bg-black"
                                x-bind:style="'right:'+maxthumb+'%; left:'+minthumb+'%'"></div>

                            <div class="absolute z-30 w-6 h-6 top-0 left-0 bg-white border border-1 rounded-full -mt-2 -ml-1"
                                x-bind:style="'left: '+minthumb+'%'"></div>

                            <div class="absolute z-30 w-6 h-6 top-0 right-0 bg-white border border-1 rounded-full -mt-2 -mr-3"
                                x-bind:style="'right: '+maxthumb+'%'"></div>

                        </div>

                    </div>

                    <div class="flex justify-between items-center py-5">
                        <div>
                            <input type="text" maxlength="5" x-on:input="mintrigger" x-model="minprice"
                                class="px-2 py-2 border text-xs border-gray-200 rounded w-20 text-center">
                        </div>
                        <div>
                            <input type="text" maxlength="5" x-on:input="maxtrigger" x-model="maxprice"
                                class="px-2 py-2 border text-xs border-gray-200 rounded w-20 text-center">
                        </div>
                    </div>

                </div>
            </div>
            <div class="grid grid-cols-2 gap-12">
                <div>
                    <a class="
                                    border border-black
                                    rounded-tl-[15px] rounded-br-[15px]
                                    w-68
                                    h-[50px]
                                    flex
                                    justify-center
                                    items-center
                                    hover:bg-black hover:text-white font-semibold text-base
                                  " href="#"><button>BỎ LỌC</button></a>
                </div>
                <div>
                    <p class="
                                        bg-black
                                        w-68
                                        h-[50px]
                                        rounded-tl-2xl rounded-br-2xl
                                        flex
                                        items-center
                                        justify-center text-white text-base font-semibold hover:bg-white hover:text-black hover:border hover:border-black cursor-pointer
                                      ">LỌC</p>
                </div>
            </div>
        </div>
        </div>
        <div x-data="range()" class="slider-container mt-8 hidden" id="slider-container"
            x-init="mintrigger(); maxtrigger()" class="relative max-w-xl w-full">
            <div>
                <input type="range" step="100" x-bind:min="min" x-bind:max="max" x-on:input="mintrigger"
                    x-model="minprice"
                    class="absolute pointer-events-none appearance-none z-20 h-2 w-full opacity-0 cursor-pointer appearance-none focus:outline-none">

                <input type="range" step="100" x-bind:min="min" x-bind:max="max" id="slider" x-on:input="maxtrigger"
                    x-model="maxprice"
                    class="absolute pointer-events-none appearance-none z-20 h-2 w-full opacity-0 cursor-pointer">

                <div class="relative z-10 h-2">

                    <div class="absolute z-10 left-0 right-0 bottom-0 top-0 rounded-md bg-gray-200"></div>

                    <div class="absolute z-20 top-0 bottom-0 rounded-md bg-green-300"
                        x-bind:style="'right:'+maxthumb+'%; left:'+minthumb+'%'"></div>

                    <div class="absolute z-30 w-6 h-6 top-0 left-0 bg-green-300 rounded-full -mt-2 -ml-1"
                        x-bind:style="'left: '+minthumb+'%'"></div>

                    <div class="absolute z-30 w-6 h-6 top-0 right-0 bg-green-300 rounded-full -mt-2 -mr-3"
                        x-bind:style="'right: '+maxthumb+'%'"></div>

                </div>

            </div>

            <div class="flex justify-between items-center py-5">
                <div>
                    <input type="text" maxlength="5" x-on:input="mintrigger" x-model="minprice"
                        class="px-3 py-2 border border-gray-200 rounded w-24 text-center">
                </div>
                <div>
                    <input type="text" maxlength="5" x-on:input="maxtrigger" x-model="maxprice"
                        class="px-3 py-2 border border-gray-200 rounded w-24 text-center">
                </div>
            </div>

        </div>

        <div>
            Kết quả tìm kiếm
        </div>
    </article>


    <hr>
</body>
<?php require_once "partials/footer.php" ?>

</html>

<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
<script>
    const button = document.getElementById('menu-button');
    const dropdownMenu = document.getElementById('dropdown-menu');
    button.addEventListener('click', () => {
        dropdownMenu.classList.toggle('hidden');
    });
    const button1 = document.getElementById('menu-button1');
    const dropdownMenu1 = document.getElementById('dropdown-menu1');
    button1.addEventListener('click', () => {
        dropdownMenu1.classList.toggle('hidden');
    });

    // Hàm để hiển thị thanh trượt khi bấm nút "Chọn giá"
    function showSlider() {
        const sliderContainer = document.getElementById('slider-container');
        sliderContainer.classList.remove('hidden'); // Hiển thị container chứa thanh trượt
    }

    // Hàm để hiển thị/ẩn thanh trượt khi bấm nút "Chọn giá"
    function toggleSlider() {
        const sliderContainer = document.getElementById('slider-container');
        sliderContainer.classList.toggle('hidden'); // Tự động ẩn/hiển thị container chứa thanh trượt
    }

    // Lấy các phần tử cần thiết
    const slider = document.getElementById("slider");
    const valueDisplay = document.getElementById("value");

    // Hàm định dạng giá trị theo tiền tệ (có dấu chấm)
    function formatCurrency(value) {
        return value.toLocaleString('vi-VN') + ' đ';
    }

    // Cập nhật giá trị khi người dùng thay đổi thanh trượt
    slider.addEventListener("input", function() {
        valueDisplay.textContent = formatCurrency(slider.value);
    });

    // Hiển thị giá trị ban đầu (với dấu chấm)
    valueDisplay.textContent = formatCurrency(slider.value);

    function range() {
        return {
            minprice: 0,
            maxprice: 10000000,
            min: 0,
            max: 10000000,
            minthumb: 0,
            maxthumb: 0,

            mintrigger() {
                this.minprice = Math.min(this.minprice, this.maxprice - 500);
                this.minthumb = ((this.minprice - this.min) / (this.max - this.min)) * 100;
            },

            maxtrigger() {
                this.maxprice = Math.max(this.maxprice, this.minprice + 500);
                this.maxthumb = 100 - (((this.maxprice - this.min) / (this.max - this.min)) * 100);
            },
        }
    }
</script>